<ion-header>
  <ion-navbar color="danger">
    <ion-title>{{!spending._id ? 'Add' : 'Update'}} spending</ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <span showWhen="ios">Cancel</span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar color="danger">
    <ion-segment [(ngModel)]="type" (ionChange)="changeTabType()" color="light">
      <ion-segment-button value="spending">
        Spending
      </ion-segment-button>
      <ion-segment-button value="earning">
        Earning
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>
<ion-content padding-top>
  <h3 [ngClass]="type" text-center (click)="focusMoney()">{{type==='spending' ? '-' : '+'}} {{(spending.money || 0) | currency:'VND':true }}</h3>
  <ion-grid>
    <ion-row>
      <ion-item>
        <ion-label stacked>Money</ion-label>
        <ion-input type="number" [(ngModel)]="spending.money" id="money"></ion-input>
      </ion-item>      
      <ion-item>
        <ion-label stacked>Input date</ion-label>
        <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="spending.input_date"></ion-datetime>
      </ion-item>      
    </ion-row>
    <ion-row>
      <ion-item>
        <ion-label stacked>Wallet</ion-label>
        <ion-select [(ngModel)]="spending.wallet_id" [selectOptions]="walletOptions" interface="action-sheet">
          <ion-option [value]="w._id" *ngFor="let w of wallets" [attr.newColor]="'test'">{{w.name}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label>Is monitor</ion-label>
        <ion-checkbox [(ngModel)]="spending.is_monitor"></ion-checkbox>
      </ion-item>
    </ion-row>
  </ion-grid>
  <div [ngSwitch]="type">
    <ion-item *ngSwitchCase="'spending'">
      <ion-label stacked class="spending">Type Spending</ion-label>
      <ion-select [(ngModel)]="type_spending_id" [selectOptions]="typeSpendingOptions">
        <ion-option [value]="t._id" *ngFor="let t of typeSpendings">{{t.parent_id ? '&nbsp;&nbsp;&nbsp;' : ''}}{{t.name}}</ion-option>
      </ion-select>
    </ion-item>   
    <ion-item *ngSwitchCase="'earning'">
      <ion-label stacked class="earning">Type Earning</ion-label>
      <ion-select [(ngModel)]="type_earning_id" [selectOptions]="typeSpendingOptions">
        <ion-option [value]="t._id" *ngFor="let t of typeEarnings">{{t.parent_id ? '&nbsp;&nbsp;&nbsp;' : ''}}{{t.name}}</ion-option>
      </ion-select>
    </ion-item>    
  </div>  
  <ion-item>
    <ion-label stacked>Description</ion-label>
    <ion-input type="text" [(ngModel)]="spending.des" [suggestionData]="['thanh', 'intenet']"></ion-input>
  </ion-item>
  <div padding>
    <button ion-button block full (click)="save()">Save</button>
  </div>
</ion-content>
